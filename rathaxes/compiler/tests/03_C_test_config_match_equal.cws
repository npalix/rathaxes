#include "misc/colors.cws"
#include "cnorm.inc.cws"
#include "rtxNode/rtxNode.inc.cws"
#include "rtxType/rtxType.inc.cws"
#include "rtxLink/rtxLink.inc.cws"

insert this.scripts_path = "../";
local source;
rtxType_Load(source);

// Used to build things bit by bit
local config;
local with;

function build_version(local_node : node, v1 : value, v2 : value, v3 : value)
{
    local unit;
    rtxNodeSerial(local_node);
    rtxNodeSerialUnit(unit, v1);
    rtxNodeSerial_AddUnit(local_node, unit);
    unit = "";
    rtxNodeSerialSep(unit, ".");
    rtxNodeSerial_AddUnit(local_node, unit);
    unit = "";
    rtxNodeSerialUnit(unit, v2);
    rtxNodeSerial_AddUnit(local_node, unit);
    unit = "";
    rtxNodeSerialSep(unit, ".");
    rtxNodeSerial_AddUnit(local_node, unit);
    unit = "";
    rtxNodeSerialUnit(unit, v3);
    rtxNodeSerial_AddUnit(local_node, unit);
    unit = "";
}




config = "";
with = "";
build_version(config, "2", "6", "34");
build_version(with, "2", "6", "35");
if (rtxLink_CompareValues<"=">(with, config) == true)
{
    traceLine("Type " + config.type
              + ": With and config should not match : config < with");
    exit 1;
}


config = "";
with = "";
build_version(config, "2", "6", "35");
build_version(with, "2", "6", "35");
if (rtxLink_CompareValues<"=">(with, config) == false)
{
    traceLine("Type " + config.type
              + ": With and config should match : config == with");
    exit 1;
}


config = "";
with = "";
build_version(config, "2", "6", "35");
build_version(with, "2", "6", "34");
if (rtxLink_CompareValues<"=">(with, config) == true)
{
    traceLine("Type " + config.type
              + ": With and config should not match : config > with");
    exit 1;
}





config = "";
with = "";
insert config.val = "1";
insert config.type= "number";
insert with.val = "2";
insert with.type= "number";
if (rtxLink_CompareValues<"=">(with, config) == true)
{
    traceLine("Type " + config.type
              + ": With and config should not match : config < with");
    exit 1;
}

config = "";
with = "";
insert config.val = "1";
insert config.type= "number";
insert with.val = "1";
insert with.type= "number";
if (rtxLink_CompareValues<"=">(with, config) == false)
{
    traceLine("Type " + config.type
              + ": With and config should match : config == with");
    exit 1;
}

config = "";
with = "";
insert config.val = "2";
insert config.type= "number";
insert with.val = "1";
insert with.type= "number";
if (rtxLink_CompareValues<"=">(with, config) == true)
{
    traceLine("Type " + config.type
              + ": With and config should not match : config > with");
    exit 1;
}





config = "";
with = "";
insert config.val = "PigeonMouette";
insert config.type= "symbol";
insert with.val = "PigeonMouette";
insert with.type= "symbol";
if (rtxLink_CompareValues<"=">(with, config) == false)
{
    traceLine("Type " + config.type
              + ": With and config should match : config == with");
    exit 1;
}


config = "";
with = "";
insert config.val = "Windows7";
insert config.type= "symbol";
insert with.val = "WindowsXP";
insert with.type= "symbol";
if (rtxLink_CompareValues<"=">(with, config) == true)
{
    traceLine("Type " + config.type
              + ": With and config should not match : config != with");
    exit 1;
}

exit 0;
